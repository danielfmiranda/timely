{"ast":null,"code":"import _objectSpread from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../css/LogInPage.css';import NavBar from\"./NavBar\";import Card from'react-bootstrap/Card';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import axios from\"axios\";import{withRouter}from\"react-router-dom\";var BASE_API_URL=process.env.REACT_APP_BASE_URL;var LogInPage=/*#__PURE__*/function(_Component){_inherits(LogInPage,_Component);function LogInPage(props){var _this;_classCallCheck(this,LogInPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(LogInPage).call(this,props));_this.handle_login=function(e,data){e.preventDefault();axios.post(\"\".concat(BASE_API_URL,\"auth-get-token/\"),{username:data.username,password:data.password}).then(function(response){var logInResponse=response.data;localStorage.setItem('token',logInResponse.token);console.log(logInResponse);_this.setState({logged_in:true});_this.props.history.push(\"/home\");}).catch(function(error){localStorage.removeItem('token');console.log(error);_this.setState({error:true});});};_this.handle_change=function(e){var name=e.target.name;var value=e.target.value;_this.setState(function(prevstate){var newState=_objectSpread({},prevstate);newState[name]=value;return newState;});};_this.state={value:'',username:'',password:'',api:'http://localhost:8000/'};return _this;}_createClass(LogInPage,[{key:\"componentDidMount\",value:function componentDidMount(){localStorage.removeItem('token');}},{key:\"submitForm\",value:function submitForm(e){e.preventDefault();console.log(\"Email: \".concat(this.state.email));}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(NavBar,{logged_in:false}),React.createElement(Card,{className:\"logInFormCard\",bg:\"dark\",text:\"white\",style:{width:'50%'}},React.createElement(Card.Header,null,React.createElement(\"h1\",null,\" Welcome to Timely! \")),React.createElement(Card.Body,null,React.createElement(Card.Text,null,\"Please log in:\"),React.createElement(\"div\",{className:\"logInForm\"},React.createElement(Form,{onSubmit:function onSubmit(e){return _this2.handle_login(e,_this2.state);}},React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Username\"),React.createElement(Form.Control,{placeholder:\"Enter username\",name:\"username\",value:this.state.username,onChange:this.handle_change})),React.createElement(Form.Group,{controlId:\"formBasicPassword\"},React.createElement(Form.Label,null,\"Password\"),React.createElement(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",value:this.state.password,onChange:this.handle_change})),React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Submit\"))))));}}]);return LogInPage;}(Component);export default withRouter(LogInPage);","map":{"version":3,"sources":["/Users/danielmiranda/PycharmProjects/timely/src/components/LogInPage.jsx"],"names":["React","Component","NavBar","Card","Form","Button","axios","withRouter","BASE_API_URL","process","env","REACT_APP_BASE_URL","LogInPage","props","handle_login","e","data","preventDefault","post","username","password","then","response","logInResponse","localStorage","setItem","token","console","log","setState","logged_in","history","push","catch","error","removeItem","handle_change","name","target","value","prevstate","newState","state","api","email","width"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/LogInPage.css';\nimport NavBar from \"./NavBar\";\nimport Card from 'react-bootstrap/Card';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from \"axios\";\nimport {withRouter} from \"react-router-dom\";\n\n\nconst BASE_API_URL = process.env.REACT_APP_BASE_URL;\n\n\n\n\nclass LogInPage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: '',\n            username: '',\n            password: '',\n            api: 'http://localhost:8000/'\n        }\n\n    }\n\n    componentDidMount() {\n        localStorage.removeItem('token');\n    }\n\n    handle_login = (e, data) => {\n        e.preventDefault();\n        axios.post(`${BASE_API_URL}auth-get-token/`, {\n            username: data.username,\n            password: data.password\n        })\n            .then((response) => {\n                let logInResponse = response.data\n                localStorage.setItem('token', logInResponse.token)\n                console.log(logInResponse);\n                this.setState({\n                    logged_in: true,\n                })\n                this.props.history.push(\"/home\");\n            })\n            .catch((error) => {\n                localStorage.removeItem('token');\n                console.log(error);\n                this.setState(\n                    {error: true}\n                )\n            });\n    };\n\n\n    handle_change = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = {...prevstate};\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n\n    submitForm(e) {\n        e.preventDefault();\n        console.log(`Email: ${this.state.email}`)\n    }\n\n\n    render() {\n        return (\n            <div>\n                <NavBar logged_in={false}/>\n                <Card className=\"logInFormCard\" bg=\"dark\" text=\"white\" style={{width: '50%'}}>\n\n                    <Card.Header>\n\n                        <h1> Welcome to Timely! </h1>\n                    </Card.Header>\n\n                    <Card.Body>\n                        <Card.Text>\n                            Please log in:\n                        </Card.Text>\n                        <div className={\"logInForm\"}>\n                            <Form onSubmit={e => this.handle_login(e, this.state)}>\n                                <Form.Group>\n                                    <Form.Label>Username</Form.Label>\n                                    <Form.Control placeholder=\"Enter username\" name=\"username\"\n                                                  value={this.state.username}\n                                                  onChange={this.handle_change}\n                                    />\n                                </Form.Group>\n\n                                <Form.Group controlId=\"formBasicPassword\">\n                                    <Form.Label>Password</Form.Label>\n                                    <Form.Control type=\"password\" placeholder=\"Password\" name=\"password\"\n                                                  value={this.state.password} onChange={this.handle_change}\n                                    />\n                                </Form.Group>\n                                <Button variant=\"primary\" type=\"submit\">\n                                    Submit\n                                </Button>\n                            </Form>\n                        </div>\n                    </Card.Body>\n                </Card>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(LogInPage);"]},"metadata":{},"sourceType":"module"}