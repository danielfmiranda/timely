{"ast":null,"code":"var _jsxFileName = \"/Users/danielmiranda/PycharmProjects/timely/src/components/HomePageContainer.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/EmployeeHomePage.css';\nimport axios from \"axios\";\nimport EmployeeHomePage from \"./EmployeeHomePage\";\nimport AdminHomePage from \"./AdminHomePage\";\nconst BASE_API_URL = process.env.REACT_APP_BASE_URL;\n\nclass HomePageContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getUserInfo = () => {\n      axios.get(`${BASE_API_URL}timely_backend/current_user/`, {\n        headers: {\n          \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n        }\n      }).then(response => {\n        let currentUserInfo = response.data;\n        this.setState({\n          first_name: currentUserInfo.first_name,\n          profile_id: currentUserInfo.id,\n          is_loading: false,\n          is_super_user: currentUserInfo.is_superuser\n        });\n      }).finally(() => {\n        this.getProfileInfo();\n      });\n    };\n\n    this.getProfileInfo = () => {\n      axios.get(`${BASE_API_URL}api/employees/${this.state.profile_id}/`, {\n        params: {}\n      }) //setting profile information in state\n      .then(response => {\n        let profile = response.data;\n        this.setState({\n          profile: profile\n        }); //preferredName = profile['preferred_name']\n      }) //if theres an error console log it\n      .catch(error => {\n        console.log(error);\n      }) //After everything, set is-loading to false (removes loading spinner)\n      .finally(() => {\n        this.setState({\n          is_loading: false\n        });\n      });\n    };\n\n    this.state = {\n      api: 'http://localhost:8000/',\n      logged_in: localStorage.getItem('token') ? true : false,\n      profile: {\n        time_entries: ['']\n      }\n    };\n\n    var moment = require('moment');\n  }\n\n  componentDidMount() {\n    if (this.state.logged_in === true) {\n      this.getUserInfo();\n    } else {\n      this.setState({\n        is_loading: false\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, this.state.is_super_user == true ? React.createElement(AdminHomePage, {\n      logged_in: this.state.logged_in,\n      first_name: this.state.first_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }) : React.createElement(EmployeeHomePage, {\n      logged_in: this.state.logged_in,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default HomePageContainer;","map":{"version":3,"sources":["/Users/danielmiranda/PycharmProjects/timely/src/components/HomePageContainer.jsx"],"names":["React","Component","PropTypes","axios","EmployeeHomePage","AdminHomePage","BASE_API_URL","process","env","REACT_APP_BASE_URL","HomePageContainer","constructor","props","getUserInfo","get","headers","localStorage","getItem","then","response","currentUserInfo","data","setState","first_name","profile_id","id","is_loading","is_super_user","is_superuser","finally","getProfileInfo","state","params","profile","catch","error","console","log","api","logged_in","time_entries","moment","require","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/EmployeeHomePage.css';\nimport axios from \"axios\";\nimport EmployeeHomePage from \"./EmployeeHomePage\";\nimport AdminHomePage from \"./AdminHomePage\";\nconst BASE_API_URL = process.env.REACT_APP_BASE_URL;\n\n\nclass HomePageContainer extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            api: 'http://localhost:8000/',\n            logged_in: localStorage.getItem('token') ? true : false,\n            profile: {\n                time_entries: ['']\n            }\n        }\n\n        var moment = require('moment');\n    }\n\n    componentDidMount() {\n        if (this.state.logged_in === true) {\n            this.getUserInfo();\n\n\n        } else {\n            this.setState({is_loading: false});\n        }\n\n    }\n\n    getUserInfo = () => {\n\n        axios.get(`${BASE_API_URL}timely_backend/current_user/`, {headers: {\"Authorization\": `Bearer ${localStorage.getItem('token')}`}})\n            .then((response) => {\n                let currentUserInfo = response.data;\n                this.setState({\n                    first_name: currentUserInfo.first_name,\n                    profile_id: currentUserInfo.id,\n                    is_loading: false,\n                    is_super_user: currentUserInfo.is_superuser\n                });\n\n            })\n            .finally(() => {\n                this.getProfileInfo();\n            });\n    };\n\n    getProfileInfo = () => {\n        axios.get(`${BASE_API_URL}api/employees/${this.state.profile_id}/`, {\n            params: {}\n        })\n        //setting profile information in state\n            .then(response => {\n                let profile = response.data;\n                this.setState({profile: profile}); //preferredName = profile['preferred_name']\n            })\n            //if theres an error console log it\n            .catch(error => {\n                console.log(error);\n            })\n            //After everything, set is-loading to false (removes loading spinner)\n            .finally(() => {\n                this.setState({is_loading: false});\n\n            });\n\n\n    }\n\n\n    render() {\n\n        return (\n            <div>\n\n                {this.state.is_super_user == true ? (<AdminHomePage logged_in={this.state.logged_in} first_name={this.state.first_name}\n                />) : (<EmployeeHomePage logged_in={this.state.logged_in}/>)}\n\n            </div>\n        );\n    }\n}\n\n\nexport default HomePageContainer;"]},"metadata":{},"sourceType":"module"}