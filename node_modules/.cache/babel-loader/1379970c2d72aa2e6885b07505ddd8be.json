{"ast":null,"code":"import _classCallCheck from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../css/EmployeeHomePage.css';import axios from\"axios\";import EmployeeHomePage from\"./EmployeeHomePage\";import AdminHomePage from\"./AdminHomePage\";var BASE_API_URL=process.env.REACT_APP_BASE_URL;var HomePageContainer=/*#__PURE__*/function(_Component){_inherits(HomePageContainer,_Component);function HomePageContainer(props){var _this;_classCallCheck(this,HomePageContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(HomePageContainer).call(this,props));_this.getUserInfo=function(){axios.get(\"\".concat(BASE_API_URL,\"timely_backend/current_user/\"),{headers:{\"Authorization\":\"Bearer \".concat(localStorage.getItem('token'))}}).then(function(response){var currentUserInfo=response.data;_this.setState({first_name:currentUserInfo.first_name,profile_id:currentUserInfo.id,is_loading:false,is_super_user:currentUserInfo.is_superuser});}).finally(function(){_this.getProfileInfo();});};_this.getProfileInfo=function(){axios.get(\"\".concat(BASE_API_URL,\"api/employees/\").concat(_this.state.profile_id,\"/\"),{params:{}})//setting profile information in state\n.then(function(response){var profile=response.data;_this.setState({profile:profile});//preferredName = profile['preferred_name']\n})//if theres an error console log it\n.catch(function(error){console.log(error);})//After everything, set is-loading to false (removes loading spinner)\n.finally(function(){_this.setState({is_loading:false});});};_this.state={api:'http://localhost:8000/',logged_in:localStorage.getItem('token')?true:false,profile:{time_entries:['']}};var moment=require('moment');return _this;}_createClass(HomePageContainer,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.state.logged_in===true){this.getUserInfo();}else{this.setState({is_loading:false});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,this.state.is_super_user==true?React.createElement(AdminHomePage,{logged_in:this.state.logged_in,first_name:this.state.first_name}):React.createElement(EmployeeHomePage,{logged_in:this.state.logged_in}));}}]);return HomePageContainer;}(Component);export default HomePageContainer;","map":{"version":3,"sources":["/Users/danielmiranda/PycharmProjects/timely/src/components/HomePageContainer.jsx"],"names":["React","Component","axios","EmployeeHomePage","AdminHomePage","BASE_API_URL","process","env","REACT_APP_BASE_URL","HomePageContainer","props","getUserInfo","get","headers","localStorage","getItem","then","response","currentUserInfo","data","setState","first_name","profile_id","id","is_loading","is_super_user","is_superuser","finally","getProfileInfo","state","params","profile","catch","error","console","log","api","logged_in","time_entries","moment","require"],"mappings":"wzBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAEA,MAAO,6BAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,GAAMC,CAAAA,YAAY,CAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAjC,C,GAGMC,CAAAA,iB,2EAEF,2BAAYC,KAAZ,CAAmB,mDACf,mFAAMA,KAAN,GADe,MAyBnBC,WAzBmB,CAyBL,UAAM,CAEhBT,KAAK,CAACU,GAAN,WAAaP,YAAb,iCAAyD,CAACQ,OAAO,CAAE,CAAC,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CAAD,CAAV,CAAzD,EACKC,IADL,CACU,SAACC,QAAD,CAAc,CAChB,GAAIC,CAAAA,eAAe,CAAGD,QAAQ,CAACE,IAA/B,CACA,MAAKC,QAAL,CAAc,CACVC,UAAU,CAAEH,eAAe,CAACG,UADlB,CAEVC,UAAU,CAAEJ,eAAe,CAACK,EAFlB,CAGVC,UAAU,CAAE,KAHF,CAIVC,aAAa,CAAEP,eAAe,CAACQ,YAJrB,CAAd,EAOH,CAVL,EAWKC,OAXL,CAWa,UAAM,CACX,MAAKC,cAAL,GACH,CAbL,EAcH,CAzCkB,OA2CnBA,cA3CmB,CA2CF,UAAM,CACnB1B,KAAK,CAACU,GAAN,WAAaP,YAAb,0BAA0C,MAAKwB,KAAL,CAAWP,UAArD,MAAoE,CAChEQ,MAAM,CAAE,EADwD,CAApE,CAGA;AAHA,CAIKd,IAJL,CAIU,SAAAC,QAAQ,CAAI,CACd,GAAIc,CAAAA,OAAO,CAAGd,QAAQ,CAACE,IAAvB,CACA,MAAKC,QAAL,CAAc,CAACW,OAAO,CAAEA,OAAV,CAAd,EAAmC;AACtC,CAPL,CAQI;AARJ,CASKC,KATL,CASW,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAXL,CAYI;AAZJ,CAaKN,OAbL,CAaa,UAAM,CACX,MAAKP,QAAL,CAAc,CAACI,UAAU,CAAE,KAAb,CAAd,EAEH,CAhBL,EAmBH,CA/DkB,CAGf,MAAKK,KAAL,CAAa,CACTO,GAAG,CAAE,wBADI,CAETC,SAAS,CAAEvB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAAgC,IAAhC,CAAuC,KAFzC,CAGTgB,OAAO,CAAE,CACLO,YAAY,CAAE,CAAC,EAAD,CADT,CAHA,CAAb,CAQA,GAAIC,CAAAA,MAAM,CAAGC,OAAO,CAAC,QAAD,CAApB,CAXe,aAYlB,C,2FAEmB,CAChB,GAAI,KAAKX,KAAL,CAAWQ,SAAX,GAAyB,IAA7B,CAAmC,CAC/B,KAAK1B,WAAL,GAGH,CAJD,IAIO,CACH,KAAKS,QAAL,CAAc,CAACI,UAAU,CAAE,KAAb,CAAd,EACH,CAEJ,C,uCA2CQ,CAEL,MACI,gCAEK,KAAKK,KAAL,CAAWJ,aAAX,EAA4B,IAA5B,CAAoC,oBAAC,aAAD,EAAe,SAAS,CAAE,KAAKI,KAAL,CAAWQ,SAArC,CAAgD,UAAU,CAAE,KAAKR,KAAL,CAAWR,UAAvE,EAApC,CACM,oBAAC,gBAAD,EAAkB,SAAS,CAAE,KAAKQ,KAAL,CAAWQ,SAAxC,EAHX,CADJ,CAQH,C,+BA9E2BpC,S,EAkFhC,cAAeQ,CAAAA,iBAAf","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/EmployeeHomePage.css';\nimport axios from \"axios\";\nimport EmployeeHomePage from \"./EmployeeHomePage\";\nimport AdminHomePage from \"./AdminHomePage\";\nconst BASE_API_URL = process.env.REACT_APP_BASE_URL;\n\n\nclass HomePageContainer extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            api: 'http://localhost:8000/',\n            logged_in: localStorage.getItem('token') ? true : false,\n            profile: {\n                time_entries: ['']\n            }\n        }\n\n        var moment = require('moment');\n    }\n\n    componentDidMount() {\n        if (this.state.logged_in === true) {\n            this.getUserInfo();\n\n\n        } else {\n            this.setState({is_loading: false});\n        }\n\n    }\n\n    getUserInfo = () => {\n\n        axios.get(`${BASE_API_URL}timely_backend/current_user/`, {headers: {\"Authorization\": `Bearer ${localStorage.getItem('token')}`}})\n            .then((response) => {\n                let currentUserInfo = response.data;\n                this.setState({\n                    first_name: currentUserInfo.first_name,\n                    profile_id: currentUserInfo.id,\n                    is_loading: false,\n                    is_super_user: currentUserInfo.is_superuser\n                });\n\n            })\n            .finally(() => {\n                this.getProfileInfo();\n            });\n    };\n\n    getProfileInfo = () => {\n        axios.get(`${BASE_API_URL}api/employees/${this.state.profile_id}/`, {\n            params: {}\n        })\n        //setting profile information in state\n            .then(response => {\n                let profile = response.data;\n                this.setState({profile: profile}); //preferredName = profile['preferred_name']\n            })\n            //if theres an error console log it\n            .catch(error => {\n                console.log(error);\n            })\n            //After everything, set is-loading to false (removes loading spinner)\n            .finally(() => {\n                this.setState({is_loading: false});\n\n            });\n\n\n    }\n\n\n    render() {\n\n        return (\n            <div>\n\n                {this.state.is_super_user == true ? (<AdminHomePage logged_in={this.state.logged_in} first_name={this.state.first_name}\n                />) : (<EmployeeHomePage logged_in={this.state.logged_in}/>)}\n\n            </div>\n        );\n    }\n}\n\n\nexport default HomePageContainer;"]},"metadata":{},"sourceType":"module"}