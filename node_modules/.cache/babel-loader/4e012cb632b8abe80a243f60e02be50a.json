{"ast":null,"code":"import _classCallCheck from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/danielmiranda/PycharmProjects/timely/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import NavBar from\"./NavBar\";import Card from'react-bootstrap/Card';import Button from'react-bootstrap/Button';import'../css/EmployeeProfile.css';import axios from\"axios\";import Accordion from\"react-bootstrap/Accordion\";import Moment from\"react-moment\";import Alert from\"react-bootstrap/Alert\";var BASE_API_URL=process.env.REACT_APP_BASE_URL;var EmployeeProfile=/*#__PURE__*/function(_Component){_inherits(EmployeeProfile,_Component);function EmployeeProfile(props){var _this;_classCallCheck(this,EmployeeProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmployeeProfile).call(this,props));_this.hello=function(){console.log(\"HELLO\");};_this.deleteTimeEntry=function(time_entry_id){console.log(time_entry_id);var time_entry=JSON.stringify(time_entry_id);console.log(\"DELETING\");axios.delete(\"\".concat(BASE_API_URL,\"api/time_entries/\").concat(time_entry,\"/\"),{headers:{\"Authorization\":\"Bearer \".concat(localStorage.getItem('token'))}}).then(function(response){console.log(response);_this.getProfileInfo();});};_this.getProfileInfo=function(){var id=_this.props.match.params.id;axios.get(\"\".concat(BASE_API_URL,\"api/employees/\").concat(id,\"/\"),{params:{}})//setting profile information in state\n.then(function(response){console.log(response);var profile=response.data;_this.setState({profile:profile});//preferredName = profile['preferred_name']\n})//if theres an error console log it\n.catch(function(error){console.log(error);})//After everything, set is-loading to false (removes loading spinner)\n.finally(function(){_this.setState({is_loading:false});});};_this.goBack=function(){_this.props.history.push(\"/home\");};_this.state={logged_in:localStorage.getItem('token')?true:false,api:'http://localhost:8000/',profile:{time_entries:['']}};return _this;}_createClass(EmployeeProfile,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProfileInfo();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(NavBar,{logged_in:this.state.logged_in}),React.createElement(Card,{className:\"logInFormCard\",bg:\"dark\",text:\"white\",style:{width:'50%'}},React.createElement(Card.Header,null,React.createElement(\"h3\",null,\" Employee Details for: \",React.createElement(\"h1\",null,React.createElement(\"b\",null,this.state.profile.first_name,\" \",this.state.profile.last_name,\" \")))),React.createElement(Card.Body,null,React.createElement(Card.Text,null,React.createElement(\"h4\",null,\" Please select a time entry to edit: \")),React.createElement(Accordion,{className:\"timeEntryAccordion\"},this.state.profile.time_entries.map(function(timeEntryInfo){var date=timeEntryInfo.date,clock_in=timeEntryInfo.clock_in,clock_out=timeEntryInfo.clock_out,late=timeEntryInfo.late,time_entry_id=timeEntryInfo.time_entry_id;return React.createElement(Card,null,React.createElement(Accordion.Toggle,{date:date,clock_in:clock_in,clock_out:clock_out,late:late,time_entry_id:time_entry_id,as:Card.Header,eventKey:time_entry_id},React.createElement(Moment,{format:\"MM/DD/YYYY\"},date)),React.createElement(Accordion.Collapse,{eventKey:time_entry_id},React.createElement(Card.Body,null,React.createElement(\"div\",{className:\"timeEntryDetailContainer\"},React.createElement(\"div\",{className:\"clockIn timeEntryDetail\"},React.createElement(\"h6\",null,React.createElement(\"b\",null,\" Clock In:\")),React.createElement(Moment,{format:\"hh:mm A\"},clock_in)),React.createElement(\"div\",{onClick:_this2.hello,className:\"clockOut timeEntryDetail\"},React.createElement(\"h6\",null,React.createElement(\"b\",null,\" Clock Out:\")),clock_out==null?React.createElement(\"p\",null,\" Pending \"):React.createElement(Moment,{format:\"hh:mm A\"},clock_out)),React.createElement(\"div\",{className:\"late timeEntryDetail\"},\"\".concat(_this2.props.late)===true?React.createElement(\"div\",{className:'alertContainer'},React.createElement(Alert,{className:\"lateAlert\",variant:'danger'},\"Late\")):React.createElement(\"div\",{className:'alertContainer'},React.createElement(Alert,{className:\"lateAlert\",variant:'info'},\"On Time\"))),React.createElement(\"div\",{className:\"deleteButtonContainer\"},React.createElement(Button,{onClick:function onClick(e){return _this2.deleteTimeEntry(time_entry_id);},className:\"deleteButton\",variant:\"danger\"},React.createElement(\"b\",null,\"x\")))))));})),React.createElement(\"div\",{className:\"goBackButtonContainer\"},React.createElement(Button,{onClick:this.goBack,className:\"goBackButton\",variant:\"primary\"},\"Go Back\")))));}}]);return EmployeeProfile;}(Component);export default EmployeeProfile;","map":{"version":3,"sources":["/Users/danielmiranda/PycharmProjects/timely/src/components/EmployeeProfile.jsx"],"names":["React","Component","NavBar","Card","Button","axios","Accordion","Moment","Alert","BASE_API_URL","process","env","REACT_APP_BASE_URL","EmployeeProfile","props","hello","console","log","deleteTimeEntry","time_entry_id","time_entry","JSON","stringify","delete","headers","localStorage","getItem","then","response","getProfileInfo","id","match","params","get","profile","data","setState","catch","error","finally","is_loading","goBack","history","push","state","logged_in","api","time_entries","width","first_name","last_name","map","timeEntryInfo","date","clock_in","clock_out","late","Header","e"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport NavBar from \"./NavBar\";\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button'\n\n\nimport '../css/EmployeeProfile.css';\nimport axios from \"axios\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Moment from \"react-moment\";\nimport Alert from \"react-bootstrap/Alert\";\n\nconst BASE_API_URL = process.env.REACT_APP_BASE_URL;\n\n\nclass EmployeeProfile extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            logged_in: localStorage.getItem('token') ? true : false,\n            api: 'http://localhost:8000/',\n            profile: {\n                time_entries: ['']\n            }\n        }\n\n    }\n\n\n    componentDidMount() {\n  this.getProfileInfo();\n\n\n    }\n\n    hello = () => {\n        console.log(\"HELLO\")\n    }\n\n    deleteTimeEntry = (time_entry_id) => {\n        console.log(time_entry_id);\n        let time_entry = JSON.stringify(time_entry_id);\n        console.log(\"DELETING\")\n         axios.delete(`${BASE_API_URL}api/time_entries/${time_entry}/`, {headers: {\"Authorization\": `Bearer ${localStorage.getItem('token')}`}})\n            .then((response) => {\n                console.log(response);\n                this.getProfileInfo();\n    })\n\n    };\n\n    getProfileInfo = () => {\n        const id = this.props.match.params.id;\n            axios.get(`${BASE_API_URL}api/employees/${id}/`, {\n            params: {}\n        })\n        //setting profile information in state\n            .then(response => {\n                console.log(response)\n                let profile = response.data;\n                this.setState({profile: profile}); //preferredName = profile['preferred_name']\n            })\n            //if theres an error console log it\n            .catch(error => {\n                console.log(error);\n            })\n            //After everything, set is-loading to false (removes loading spinner)\n            .finally(() => {\n                this.setState({is_loading: false});\n\n\n            });\n\n    }\n\n    goBack = () => {\n                        this.props.history.push(\"/home\");\n\n    }\n\n    render() {\n        return (\n            <div>\n                <NavBar logged_in={this.state.logged_in}/>\n                <Card className=\"logInFormCard\" bg=\"dark\" text=\"white\" style={{width: '50%'}}>\n                    <Card.Header>\n                        <h3> Employee Details for: <h1>\n                            <b>{this.state.profile.first_name} {this.state.profile.last_name} </b></h1></h3>\n                    </Card.Header>\n                    <Card.Body>\n                        <Card.Text>\n\n                            <h4> Please select a time entry to edit: </h4>\n                        </Card.Text>\n\n\n                        <Accordion className={\"timeEntryAccordion\"}>\n\n                            {this.state.profile.time_entries.map(timeEntryInfo => {\n                                const {date, clock_in, clock_out, late, time_entry_id} = timeEntryInfo;\n\n                                return (\n\n                                    <Card>\n                                        <Accordion.Toggle date={date} clock_in={clock_in}\n                                                          clock_out={clock_out} late={late}\n                                                          time_entry_id={time_entry_id} as={Card.Header}\n                                                          eventKey={time_entry_id}>\n                                            <Moment\n                                                format=\"MM/DD/YYYY\">{date}</Moment>\n                                        </Accordion.Toggle>\n                                        <Accordion.Collapse eventKey={time_entry_id}>\n                                            <Card.Body>\n                                                <div className={\"timeEntryDetailContainer\"}>\n                                                    <div className={\"clockIn timeEntryDetail\"}>\n                                                        <h6><b> Clock In:</b></h6>\n                                                        <Moment\n                                                            format=\"hh:mm A\">{clock_in}</Moment>\n                                                    </div>\n                                                    <div onClick={this.hello} className={\"clockOut timeEntryDetail\"}>\n                                                        <h6><b> Clock Out:</b></h6>\n                                                        {clock_out == null ? (<p> Pending </p>) : (<Moment\n                                                            format=\"hh:mm A\">{clock_out}</Moment>)}\n\n\n                                                    </div>\n                                                    <div className={\"late timeEntryDetail\"}>\n\n                                                        {`${this.props.late}` === true ? (\n                                                            <div className={'alertContainer'}>\n                                                                <Alert className={\"lateAlert\"}\n                                                                       variant={'danger'}>\n                                                                    Late\n                                                                </Alert>\n                                                            </div>) : (\n                                                            <div className={'alertContainer'}><Alert\n                                                                className={\"lateAlert\"} variant={'info'}>\n                                                                On Time\n                                                            </Alert>\n\n                                                            </div>\n                                                        )}\n\n                                                    </div>\n                                                    <div className={\"deleteButtonContainer\"}>\n                                                    <Button onClick={(e)=>this.deleteTimeEntry(time_entry_id)} className={\"deleteButton\"} variant=\"danger\"><b>x</b></Button>\n                                                    </div>\n                                                </div>\n                                            </Card.Body>\n                                        </Accordion.Collapse>\n                                    </Card>\n\n\n                                )\n                            })}\n                        </Accordion>\n                        <div className={\"goBackButtonContainer\"}>\n                        <Button onClick={this.goBack} className={\"goBackButton\"} variant=\"primary\">Go Back</Button>\n                        </div>\n                    </Card.Body>\n\n                </Card>\n            </div>\n        );\n    }\n}\n\nEmployeeProfile.propTypes = {};\n\nexport default EmployeeProfile;\n"]},"metadata":{},"sourceType":"module"}